<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--360浏览器优先以webkit内核解析-->
    <title>系统首页</title>
    <link rel="shortcut icon" href="favicon.ico">
    <link href="../static/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>
    <link href="../static/css/font-awesome.min.css" th:href="@{/css/font-awesome.min.css}" rel="stylesheet"/>
    <link href="../static/css/main/animate.min.css" th:href="@{/css/main/animate.min.css}" rel="stylesheet"/>
    <link href="../static/css/main/style.min862f.css" th:href="@{/css/main/style.min862f.css}" rel="stylesheet"/>
    <link href="../static/css/base/base.css" th:href="@{/css/base/base.css}" rel="stylesheet"/>
</head>

<body class="gray-bg">
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-sm-4">
            <div class="ibox">
                <div class="ibox-title">
                    <span class="label label-primary pull-right">NEW</span>
                    <h5>IT-01 - 设计部</h5>
                </div>
                <div class="ibox-content">
                    <h4>部门简介</h4>
                    <p>
                        平面设计（graphic design），也称为视觉传达设计，是以“视觉”作为沟通和表现的方式，透过多种方式来创造和结合符号、图片和文字，借此作出用来传达想法或讯息的视觉表现。
                    </p>
                    <div>
                        <span>当前项目进度：</span>
                        <div class="stat-percent">48%</div>
                        <div class="progress progress-mini">
                            <div style="width: 48%;" class="progress-bar"></div>
                        </div>
                    </div>
                    <div class="row  m-t-sm">
                        <div class="col-sm-4">
                            <div class="font-bold">项目</div>
                            12
                        </div>
                        <div class="col-sm-4">
                            <div class="font-bold">周期</div>
                            4个月
                        </div>
                        <div class="col-sm-4 text-right">
                            <div class="font-bold">预算</div>
                            &yen;200,913 <i class="fa fa-level-up text-navy"></i>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="ibox">
                <div class="ibox-title">
                    <h5>IT-02 - 开发部</h5>
                </div>
                <div class="ibox-content">
                    <h4>部门简介</h4>
                    <p>
                        平面设计（graphic design），也称为视觉传达设计，是以“视觉”作为沟通和表现的方式，透过多种方式来创造和结合符号、图片和文字，借此作出用来传达想法或讯息的视觉表现。
                    </p>
                    <div>
                        <span>当前项目进度：</span>
                        <div class="stat-percent">61%</div>
                        <div class="progress progress-mini">
                            <div style="width: 61%;" class="progress-bar"></div>
                        </div>
                    </div>
                    <div class="row  m-t-sm">
                        <div class="col-sm-4">
                            <div class="font-bold">项目</div>
                            43
                        </div>
                        <div class="col-sm-4">
                            <div class="font-bold">周期</div>
                            1个月
                        </div>
                        <div class="col-sm-4 text-right">
                            <div class="font-bold">预算</div>
                            &yen;705,913 <i class="fa fa-level-up text-navy"></i>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="ibox">
                <div class="ibox-title">

                    <h5>IT-02 - 销售部</h5>
                </div>
                <div class="ibox-content">
                    <h4>部门简介</h4>
                    <p>
                        平面设计（graphic design），也称为视觉传达设计，是以“视觉”作为沟通和表现的方式，透过多种方式来创造和结合符号、图片和文字，借此作出用来传达想法或讯息的视觉表现。
                    </p>
                    <div>
                        <span>当前项目进度：</span>
                        <div class="stat-percent">82%</div>
                        <div class="progress progress-mini">
                            <div style="width: 82%;" class="progress-bar"></div>
                        </div>
                    </div>
                    <div class="row  m-t-sm">
                        <div class="col-sm-4">
                            <div class="font-bold">项目</div>
                            68
                        </div>
                        <div class="col-sm-4">
                            <div class="font-bold">周期</div>
                            2个月
                        </div>
                        <div class="col-sm-4 text-right">
                            <div class="font-bold">预算</div>
                            &yen;701,400 <i class="fa fa-level-up text-navy"></i>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-3">
            <div class="ibox">
                <div class="ibox-content">
                    <h5>收入</h5>
                    <h1 class="no-margins">886,200</h1>
                    <div class="stat-percent font-bold text-navy">98% <i class="fa fa-bolt"></i></div>
                    <small>总收入</small>
                </div>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="ibox">
                <div class="ibox-content">
                    <h5>本月收入</h5>
                    <h1 class="no-margins">1 738,200</h1>
                    <div class="stat-percent font-bold text-navy">98% <i class="fa fa-bolt"></i></div>
                    <small>总收入</small>
                </div>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="ibox">
                <div class="ibox-content">
                    <h5>本日收入</h5>
                    <h1 class="no-margins">-200,100</h1>
                    <div class="stat-percent font-bold text-danger">12% <i class="fa fa-level-down"></i></div>
                    <small>总收入</small>
                </div>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="ibox">
                <div class="ibox-content">
                    <h5>搜索有收入</h5>
                    <h1 class="no-margins">54,200</h1>
                    <div class="stat-percent font-bold text-danger">24% <i class="fa fa-level-down"></i></div>
                    <small>总收入</small>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-3">
            <div class="ibox">
                <div class="ibox-content">
                    <h5>预警</h5>
                    <table class="table table-stripped small m-t-md">
                        <tbody>
                        <tr>
                            <td class="no-borders">
                                <i class="fa fa-circle text-navy"></i>
                            </td>
                            <td class="no-borders">
                                示例 01
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <i class="fa fa-circle text-navy"></i>
                            </td>
                            <td>
                                示例 02
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <i class="fa fa-circle text-navy"></i>
                            </td>
                            <td>
                                示例 03
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="ibox">
                <div class="ibox-content">
                    <h5>项目</h5>
                    <table class="table table-stripped small m-t-md">
                        <tbody>
                        <tr>
                            <td class="no-borders">
                                <i class="fa fa-circle text-navy"></i>
                            </td>
                            <td class="no-borders">
                                示例 01
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <i class="fa fa-circle text-navy"></i>
                            </td>
                            <td>
                                示例 02
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <i class="fa fa-circle text-navy"></i>
                            </td>
                            <td>
                                示例 03
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="ibox">
                <div class="ibox-content">
                    <h5>消息</h5>
                    <table class="table table-stripped small m-t-md">
                        <tbody>
                        <tr>
                            <td class="no-borders">
                                <i class="fa fa-circle text-danger"></i>
                            </td>
                            <td class="no-borders">
                                示例 01
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <i class="fa fa-circle text-danger"></i>
                            </td>
                            <td>
                                示例 02
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <i class="fa fa-circle text-danger"></i>
                            </td>
                            <td>
                                示例 03
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="ibox">
                <div class="ibox-content">
                    <h5>通知</h5>
                    <table class="table table-stripped small m-t-md">
                        <tbody>
                        <tr>
                            <td class="no-borders">
                                <i class="fa fa-circle text-danger"></i>
                            </td>
                            <td class="no-borders">
                                示例 01
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <i class="fa fa-circle text-danger"></i>
                            </td>
                            <td>
                                示例 02
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <i class="fa fa-circle text-danger"></i>
                            </td>
                            <td>
                                示例 03
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>住房类别</h5>
                </div>
                <div class="ibox-content">
                    <div class="echarts" id="houseType"></div>
                </div>
            </div>
        </div>
        <div class="col-sm-6">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>结构类型</h5>
                </div>
                <div class="ibox-content">
                    <div class="echarts" id="structureType"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<script th:src="@{/js/jquery.min.js}"></script>
<script th:src="@{/js/bootstrap.min.js}"></script>
<script th:src="@{/ajax/libs/layer/layer.min.js}"></script>
<th:block th:include="include :: footer"/>
<th:block th:include="include :: peity-js"/>
<th:block th:include="include :: sparkline-js"/>
<th:block th:include="include :: echarts-js"/>
<script type="text/javascript">
    $('#pay-qrcode').click(function () {
        var html = $(this).html();
        parent.layer.open({
            title: false,
            type: 1,
            closeBtn: false,
            shadeClose: true,
            area: ['600px', '360px'],
            content: html
        });
    });
    function initData(elementId, itemArray, dataArray, title) {
        var pieChart = echarts.init(document.getElementById(elementId));
        var pieoption = {
            title: {
                text: title,
                subtext: '数据',
                x: 'center'
            },
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            legend: {
                orient: 'vertical',
                x: 'left',
                data: itemArray
            },
            calculable: true,
            series: [
                {
                    name: '访问来源',
                    type: 'pie',
                    radius: '55%',
                    center: ['50%', '60%'],
                    data: dataArray
                }
            ]
        };
        pieChart.setOption(pieoption);
        $(window).resize(pieChart.resize);
    }

    $(document).ready(function () {

        var houseTypeItem = ['长期闲置房', '安全住房', '异地搬迁', '废弃危房', '其他']
        var houseData = [1100,11,112,121,1212];
        houseTypeItem.forEach(function (val, index, arr) {
            var obj = {
                value: val,
                name: houseTypeItem[index]
            }
            houseData.push(obj)
        })
        initData("houseType", houseTypeItem, houseData, '住房类别')

        var structureTypeItem = ['砖石结构(预制板)', '砖石结构(非预制板)', '土木结构', '混凝土结构', '窑洞', '钢结构', '混杂结构', '其他']
        var houseData = [112,12,12,12,12,34,543,34];
        structureTypeItem.forEach(function (val, index, arr) {
            var obj = {
                value: val,
                name: structureTypeItem[index]
            }
            houseData.push(obj)
        })
        initData("structureType", structureTypeItem, houseData, '结构类型')

        var offsetId = ""
        // 发送Ajax请求
        var config = {
            url: "/index/system/houseData",
            type: "get",
            success: function (result) {
                var houseTypeItem = ['长期闲置房', '安全住房', '异地搬迁', '废弃危房', '其他']
                var houseData = [];
                result.data.houseType.forEach(function (val, index, arr) {
                    var obj = {
                        value: val,
                        name: houseTypeItem[index]
                    }
                    houseData.push(obj)
                })
                initData("houseType", houseTypeItem, houseData, '住房类别')

                var structureTypeItem = ['砖石结构(预制板)', '砖石结构(非预制板)', '土木结构', '混凝土结构', '窑洞', '钢结构', '混杂结构', '其他']
                var houseData = [];
                result.data.structureType.forEach(function (val, index, arr) {
                    var obj = {
                        value: val,
                        name: structureTypeItem[index]
                    }
                    houseData.push(obj)
                })
                initData("structureType", structureTypeItem, houseData, '结构类型')

                var buildTypeItem = ['自行建造', '建筑工匠建造', '有资质的施工队伍建造', '其他']
                var houseData = [];
                result.data.buildType.forEach(function (val, index, arr) {
                    var obj = {
                        value: val,
                        name: buildTypeItem[index]
                    }
                    houseData.push(obj)
                })
                initData("buildType", buildTypeItem, houseData, '建造方式')

                var landTypeItem = ['宅基地', '非宅基地']
                var houseData = [];
                result.data.landType.forEach(function (val, index, arr) {
                    var obj = {
                        value: val,
                        name: landTypeItem[index]
                    }
                    houseData.push(obj)
                })
                initData("landType", landTypeItem, houseData, '土地性质')


                var isProveItem = ['有无宅基地手续', '有无规划建设手续', '有无竣工验收手续', '有无房屋登记手续', '其他']
                var houseData = [];
                result.data.isProve.forEach(function (val, index, arr) {
                    var obj = {
                        value: val,
                        name: isProveItem[index]
                    }
                    houseData.push(obj)
                })
                initData("isProve", isProveItem, houseData, '审批手续')


                var rebuildUsedItem = ['餐饮服务', '民俗宾馆', '批发零售', '医疗卫生', '休闲娱乐', '生产加工', '仓储物流', '养老服务', '其他']
                var houseData = [];
                result.data.rebuildUsed.forEach(function (val, index, arr) {
                    var obj = {
                        value: val,
                        name: rebuildUsedItem[index]
                    }
                    houseData.push(obj)
                })
                initData("rebuildUsed", rebuildUsedItem, houseData, '改造用途')
            }
        };
        // $.ajax(config)
    });

    function selectDept() {
        var cityId = $('#deptId').val();
        var config = {
            url: "/index/system/houseData/"+cityId,
            type: "get",
            success: function (result) {
                var houseTypeItem = ['长期闲置房', '安全住房', '异地搬迁', '废弃危房', '其他']
                var houseData = [];
                result.data.houseType.forEach(function (val, index, arr) {
                    var obj = {
                        value: val,
                        name: houseTypeItem[index]
                    }
                    houseData.push(obj)
                })
                initData("houseType", houseTypeItem, houseData, '住房类别')

                var structureTypeItem = ['砖石结构(预制板)', '砖石结构(非预制板)', '土木结构', '混凝土结构', '窑洞', '钢结构', '混杂结构', '其他']
                var houseData = [];
                result.data.structureType.forEach(function (val, index, arr) {
                    var obj = {
                        value: val,
                        name: structureTypeItem[index]
                    }
                    houseData.push(obj)
                })
                initData("structureType", structureTypeItem, houseData, '结构类型')

                var buildTypeItem = ['自行建造', '建筑工匠建造', '有资质的施工队伍建造', '其他']
                var houseData = [];
                result.data.buildType.forEach(function (val, index, arr) {
                    var obj = {
                        value: val,
                        name: buildTypeItem[index]
                    }
                    houseData.push(obj)
                })
                initData("buildType", buildTypeItem, houseData, '建造方式')

                var landTypeItem = ['宅基地', '非宅基地']
                var houseData = [];
                result.data.landType.forEach(function (val, index, arr) {
                    var obj = {
                        value: val,
                        name: landTypeItem[index]
                    }
                    houseData.push(obj)
                })
                initData("landType", landTypeItem, houseData, '土地性质')


                var isProveItem = ['有无宅基地手续', '有无规划建设手续', '有无竣工验收手续', '有无房屋登记手续', '其他']
                var houseData = [];
                result.data.isProve.forEach(function (val, index, arr) {
                    var obj = {
                        value: val,
                        name: isProveItem[index]
                    }
                    houseData.push(obj)
                })
                initData("isProve", isProveItem, houseData, '审批手续')


                var rebuildUsedItem = ['餐饮服务', '民俗宾馆', '批发零售', '医疗卫生', '休闲娱乐', '生产加工', '仓储物流', '养老服务', '其他']
                var houseData = [];
                result.data.rebuildUsed.forEach(function (val, index, arr) {
                    var obj = {
                        value: val,
                        name: rebuildUsedItem[index]
                    }
                    houseData.push(obj)
                })
                initData("rebuildUsed", rebuildUsedItem, houseData, '改造用途')
            }
        };
        $.ajax(config)
    }
</script>
</body>
</html>
